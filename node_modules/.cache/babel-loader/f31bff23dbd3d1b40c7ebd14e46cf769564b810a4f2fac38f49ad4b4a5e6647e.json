{"ast":null,"code":"import React from'react';import{BrowserRouter as Router,Route,Routes,Navigate}from'react-router-dom';import ProductList from'./components/ProductList';import ProductDetail from'./components/ProductDetail';import Cart from'./components/Cart';import Checkout from'./components/Checkout';import Confirmation from'./components/Confirmation';import Header from'./components/Header';import Login from'./components/Login';import SignUp from'./components/SignUp';import AdminDashboard from'./components/AdminDashboard';import{CartProvider}from'./context/CartContext';import'./App.css';import OrderList from'./components/OrderList';// Ensure this import is correct\nimport OrderDetails from'./components/OrderDetails';// Ensure this import is correct\nimport AccountPage from'./components/AccountPage';// Import the AccountPage component\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const cors=require('cors');app.use(cors({origin:'http://localhost:3000'}));// Allow frontend to access backend\nfunction App(){const isAuthenticated=!!localStorage.getItem('token');const isAdmin=localStorage.getItem('isAdmin')==='true';const ProtectedRoute=_ref=>{let{element,authRequired,adminRequired}=_ref;if(!isAuthenticated()){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});// Redirect to login if not authenticated\n}if(adminRequired&&!isAdmin()){return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});// Redirect to home if not admin\n}return element;};return/*#__PURE__*/_jsx(CartProvider,{children:/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"app-container\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(ProductList,{})}),/*#__PURE__*/_jsx(Route,{path:\"/product/:id\",element:/*#__PURE__*/_jsx(ProductDetail,{})}),/*#__PURE__*/_jsx(Route,{path:\"/cart\",element:/*#__PURE__*/_jsx(Cart,{})}),/*#__PURE__*/_jsx(Route,{path:\"/checkout\",element:/*#__PURE__*/_jsx(Checkout,{})}),/*#__PURE__*/_jsx(Route,{path:\"/confirmation\",element:/*#__PURE__*/_jsx(Confirmation,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/dashboard\",element:isAuthenticated&&isAdmin?/*#__PURE__*/_jsx(AdminDashboard,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:/*#__PURE__*/_jsx(SignUp,{})}),\" \",/*#__PURE__*/_jsx(Route,{path:\"/orders\",element:/*#__PURE__*/_jsx(OrderList,{userId:localStorage.getItem('userId')})}),/*#__PURE__*/_jsx(Route,{path:\"/order/:orderId\",element:/*#__PURE__*/_jsx(OrderDetails,{})}),/*#__PURE__*/_jsx(Route,{path:\"/account\",element:/*#__PURE__*/_jsx(AccountPage,{})})]})})]})});}export default App;","map":{"version":3,"names":["React","BrowserRouter","Router","Route","Routes","Navigate","ProductList","ProductDetail","Cart","Checkout","Confirmation","Header","Login","SignUp","AdminDashboard","CartProvider","OrderList","OrderDetails","AccountPage","jsx","_jsx","jsxs","_jsxs","cors","require","app","use","origin","App","isAuthenticated","localStorage","getItem","isAdmin","ProtectedRoute","_ref","element","authRequired","adminRequired","to","children","className","path","userId"],"sources":["/Users/lamtran/Documents/ShopeeLite/shopeelite/src/App.js"],"sourcesContent":["import React from 'react';\nimport { BrowserRouter as Router, Route, Routes, Navigate } from 'react-router-dom';\nimport ProductList from './components/ProductList';\nimport ProductDetail from './components/ProductDetail';\nimport Cart from './components/Cart';\nimport Checkout from './components/Checkout';\nimport Confirmation from './components/Confirmation';\nimport Header from './components/Header';\nimport Login from './components/Login';\nimport SignUp from './components/SignUp';\nimport AdminDashboard from './components/AdminDashboard';\nimport { CartProvider } from './context/CartContext';\nimport './App.css';\nimport OrderList from './components/OrderList';   // Ensure this import is correct\nimport OrderDetails from './components/OrderDetails';   // Ensure this import is correct\nimport AccountPage from './components/AccountPage';  // Import the AccountPage component\n\n\nconst cors = require('cors');\n\napp.use(cors({ origin: 'http://localhost:3000' }));  // Allow frontend to access backend\nfunction App() {\n  const isAuthenticated = !!localStorage.getItem('token');\n  const isAdmin = localStorage.getItem('isAdmin') === 'true';\n\n  const ProtectedRoute = ({ element, authRequired, adminRequired }) => {\n    if (!isAuthenticated()) {\n      return <Navigate to=\"/login\" />;  // Redirect to login if not authenticated\n    }\n    if (adminRequired && !isAdmin()) {\n      return <Navigate to=\"/\" />;  // Redirect to home if not admin\n    }\n    return element;\n  };\n\n  return (\n    <CartProvider>\n      <Router>\n        <Header />\n        <div className=\"app-container\">\n          <Routes>\n            <Route path=\"/\" element={<ProductList />} />\n            <Route path=\"/product/:id\" element={<ProductDetail />} />\n            <Route path=\"/cart\" element={<Cart />} />\n            <Route path=\"/checkout\" element={<Checkout />} />\n            <Route path=\"/confirmation\" element={<Confirmation />} />\n            <Route path=\"/login\" element={<Login />} />\n            <Route \n          path=\"/admin/dashboard\" \n          element={isAuthenticated && isAdmin ? <AdminDashboard /> : <Navigate to=\"/login\" />} \n        />\n            <Route path=\"/signup\" element={<SignUp />} /> {/* Route for signup page */}\n            <Route path=\"/orders\" element={<OrderList userId={localStorage.getItem('userId')} />} />\n            <Route path=\"/order/:orderId\" element={<OrderDetails />} />\n            <Route path=\"/account\" element={<AccountPage />} />\n          </Routes>\n        </div>\n      </Router>\n    </CartProvider>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}