{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import'./AccountPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AccountPage(){const[orders,setOrders]=useState([]);const navigate=useNavigate();const userId=localStorage.getItem('userId');// Get logged-in user's ID\nconst token=localStorage.getItem('token');// Check for login status\nuseEffect(()=>{if(!token){navigate('/login');// If not logged in, redirect to login\n}else{// Correct URL with backticks for string interpolation\nfetch(`http://localhost:5002/api/user/${userId}/orders`,{headers:{'Authorization':`Bearer ${token}`// Pass token for authorization\n}}).then(response=>response.json()).then(data=>setOrders(data)).catch(error=>console.error('Error fetching orders:',error));}},[userId,navigate,token]);// Handle logout\nconst handleLogout=()=>{localStorage.removeItem('token');// Clear token from localStorage\nlocalStorage.removeItem('userId');// Clear userId from localStorage\nnavigate('/login');// Redirect to login\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"account-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Orders\"}),/*#__PURE__*/_jsx(\"ul\",{children:orders.map(order=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{onClick:()=>navigate(`/order/${order._id}`),className:\"order-link\",children:[\"Order #\",order._id,\" - \",order.status]})},order._id))}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-button\",children:\"Logout\"})]});}export default AccountPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","AccountPage","orders","setOrders","navigate","userId","localStorage","getItem","token","fetch","headers","then","response","json","data","catch","error","console","handleLogout","removeItem","className","children","map","order","onClick","_id","status"],"sources":["/Users/lamtran/Documents/ShopeeLite/shopeelite/src/components/AccountPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './AccountPage.css';\n\nfunction AccountPage() {\n  const [orders, setOrders] = useState([]);\n  const navigate = useNavigate();\n  const userId = localStorage.getItem('userId');  // Get logged-in user's ID\n  const token = localStorage.getItem('token');    // Check for login status\n\n  useEffect(() => {\n    if (!token) {\n      navigate('/login'); // If not logged in, redirect to login\n    } else {\n      // Correct URL with backticks for string interpolation\n      fetch(`http://localhost:5002/api/user/${userId}/orders`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,  // Pass token for authorization\n        }\n      })\n      .then(response => response.json())\n      .then(data => setOrders(data))\n      .catch(error => console.error('Error fetching orders:', error));\n    }\n  }, [userId, navigate, token]);\n\n  // Handle logout\n  const handleLogout = () => {\n    localStorage.removeItem('token');    // Clear token from localStorage\n    localStorage.removeItem('userId');   // Clear userId from localStorage\n    navigate('/login');                  // Redirect to login\n  };\n\n  return (\n    <div className=\"account-container\">\n      <h2>Your Orders</h2>\n      <ul>\n        {orders.map(order => (\n          <li key={order._id}>\n            <div onClick={() => navigate(`/order/${order._id}`)} className=\"order-link\">\n              Order #{order._id} - {order.status}\n            </div>\n          </li>\n        ))}\n      </ul>\n\n      {/* Logout button */}\n      <button onClick={handleLogout} className=\"logout-button\">\n        Logout\n      </button>\n    </div>\n  );\n}\n\nexport default AccountPage;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3B,QAAS,CAAAC,WAAWA,CAAA,CAAG,CACrB,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAAAU,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAS,MAAM,CAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAG;AAChD,KAAM,CAAAC,KAAK,CAAGF,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAK;AAEhDZ,SAAS,CAAC,IAAM,CACd,GAAI,CAACa,KAAK,CAAE,CACVJ,QAAQ,CAAC,QAAQ,CAAC,CAAE;AACtB,CAAC,IAAM,CACL;AACAK,KAAK,CAAC,kCAAkCJ,MAAM,SAAS,CAAE,CACvDK,OAAO,CAAE,CACP,eAAe,CAAE,UAAUF,KAAK,EAAK;AACvC,CACF,CAAC,CAAC,CACDG,IAAI,CAACC,QAAQ,EAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCF,IAAI,CAACG,IAAI,EAAIX,SAAS,CAACW,IAAI,CAAC,CAAC,CAC7BC,KAAK,CAACC,KAAK,EAAIC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAAC,CACjE,CACF,CAAC,CAAE,CAACX,MAAM,CAAED,QAAQ,CAAEI,KAAK,CAAC,CAAC,CAE7B;AACA,KAAM,CAAAU,YAAY,CAAGA,CAAA,GAAM,CACzBZ,YAAY,CAACa,UAAU,CAAC,OAAO,CAAC,CAAK;AACrCb,YAAY,CAACa,UAAU,CAAC,QAAQ,CAAC,CAAI;AACrCf,QAAQ,CAAC,QAAQ,CAAC,CAAmB;AACvC,CAAC,CAED,mBACEJ,KAAA,QAAKoB,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCvB,IAAA,OAAAuB,QAAA,CAAI,aAAW,CAAI,CAAC,cACpBvB,IAAA,OAAAuB,QAAA,CACGnB,MAAM,CAACoB,GAAG,CAACC,KAAK,eACfzB,IAAA,OAAAuB,QAAA,cACErB,KAAA,QAAKwB,OAAO,CAAEA,CAAA,GAAMpB,QAAQ,CAAC,UAAUmB,KAAK,CAACE,GAAG,EAAE,CAAE,CAACL,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,SACnE,CAACE,KAAK,CAACE,GAAG,CAAC,KAAG,CAACF,KAAK,CAACG,MAAM,EAC/B,CAAC,EAHCH,KAAK,CAACE,GAIX,CACL,CAAC,CACA,CAAC,cAGL3B,IAAA,WAAQ0B,OAAO,CAAEN,YAAa,CAACE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,QAEzD,CAAQ,CAAC,EACN,CAAC,CAEV,CAEA,cAAe,CAAApB,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}